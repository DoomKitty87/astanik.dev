<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ansel Stanik</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />
  <link rel="icon" href="favicon.png">
  <svg>
    <filter id="noise">
      <feTurbulence id="backgroundfilter"
        type="turbulence"
        baseFrequency="0.0015"
        numOctaves="2"
        result="noisetexture"
      />
      <feColorMatrix
        type="saturate"
        values="0.2"
        in="noisetexture"
        result="desat"/>
      <feBlend 
        in="desat"
        in2="SourceGraphic"
        mode="normal"
      />
    </filter>
  </svg>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="background" id="background"></div>
  <div class="namecontainer" id="namecontainer">
    <h1 class="nametitle" id="nametext">ansel</h1>
    <h2 class="namesubtitle" id="namesub">stanik</h2>
  </div>
  <div class="decorativeblock" id="decoration"></div>
  <div class="menubuttons">
    <h3 data-active="false" class="menubutton" onclick="openPanel(0)">work</h3>
    <h3 data-active="false" class="menubutton" onclick="openPanel(1)">about</h3>
    <h3 data-active="false" class="menubutton" onclick="openPanel(2)">skills</h3>
    <h3 data-active="false" class="menubutton" onclick="openPanel(3)">contact</h3>
  </div>
  <div class="popupholder" id="popupholder">
  <div class="popupdisplay">
    <h1 class="titletext">things i did</h1>
    <div class="carousel" id="portfolio">
      <div class="project">
        <img class="projectimage" src="symbiont.png" style="object-position: left">
        <div class="projectcard">
          <h1 class="projecttitle">Symbiont</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:green">Unity</h3>
            <h3 class="projecttag" style="background-color:coral">SQL</h3>
            <h3 class="projecttag" style="background-color:violet">PHP</h3>
          </div>
          <h2 class="projecttext">FPS game with consciousness-swapping made in Unity engine.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="seafoam.png">
        <div class="projectcard">
          <h1 class="projecttitle">Seafoam</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:red">HTML</h3>
            <h3 class="projecttag" style="background-color:gold">JavaScript</h3>
          </div>
          <h2 class="projecttext">Webapp port of RouteGen for gemstone mining routes in games.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="planck.png" style="object-position: left">
        <div class="projectcard">
          <h1 class="projecttitle">Planck</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:blue">Python</h3>
            <h3 class="projecttag" style="background-color:darkorchid">Network</h3>
          </div>
          <h2 class="projecttext">Private messaging app using peer-to-server-to-peer networking and PyQt for GUI.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="trebuchet.png" style="object-position: left">
        <div class="projectcard">
          <h1 class="projecttitle">Trebuchet.js</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:gold">JavaScript</h3>
            <h3 class="projecttag" style="background-color:orange">Math</h3>
          </div>
          <h2 class="projecttext">Node.js package to bring lightweight physics to Three.js.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="primes.png" style="object-position: right">
        <div class="projectcard">
          <h1 class="projecttitle">Primes</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:blue">Python</h3>
            <h3 class="projecttag" style="background-color:orange">Math</h3>
          </div>
          <h2 class="projecttext">Playground for large prime number generation with different methods.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="transience.png">
        <div class="projectcard">
          <h1 class="projecttitle">Transience</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:green">Unity</h3>
          </div>
          <h2 class="projecttext">2D platformer with music-synced elements made in Unity.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="cube.png" style="object-position: left">
        <div class="projectcard">
          <h1 class="projecttitle">CommandLine3D</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:darkblue">C++</h3>
          </div>
          <h2 class="projecttext">A 3D rendering engine for the command line.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="quickparse.png">
        <div class="projectcard">
          <h1 class="projecttitle">Quickparse.js</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:gold">JavaScript</h3>
            <h3 class="projecttag" style="background-color:orange">Math</h3>
          </div>
          <h2 class="projecttext">Math expression parsing package for user input-expression in Node.js.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="route.png">
        <div class="projectcard">
          <h1 class="projecttitle">RouteGen</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:darkblue">C++</h3>
          </div>
          <h2 class="projecttext">Command-line/R&D version of Seafoam, generating routes for gemstone mining.</h2>
        </div>
      </div>
      <div class="project">
        <img class="projectimage" src="snowmelt.png">
        <div class="projectcard">
          <h1 class="projecttitle">Snowmelt</h1>
          <div class="tags">
            <h3 class="projecttag" style="background-color:firebrick">Rainmeter</h3>
          </div>
          <h2 class="projecttext">Rainmeter skin that I made and use. I like system info and whatnot.</h2>
        </div>
      </div>
    </div>
    <p class="bodytext">test</p>
  </div>
  <div class="popupdisplay" id="popupholder">
    <h1 class="titletext">about me</h1>
    <p class="bodytext">hi i'm ansel, a high school junior in portland, oregon. i like music, computers, puzzles, lights, and colors.</p>
  </div>
  <div class="popupdisplay">
    <h1 class="titletext">things i can do</h1>
  </div>
  <div class="popupdisplay">
    <h1 class="titletext">contact me</h1>
    <p class="bodytext">email me at <a href="" class="contactlink" id="emailtext"></a></p>
  </div>
  </div>
  <script>
    document.getElementById('emailtext').innerHTML = 'ansel.' + 'stanik' + '@' + 'icloud.com';
    document.getElementById('emailtext').href = 'mailto:' + 'ansel.' + 'stanik' + '@' + 'icloud.com';
    const name = document.getElementById('nametext');
    const last = document.getElementById('namesub');
    const nameContainer = document.getElementById('namecontainer');
    const decorativeBlock = document.getElementById('decoration');
    const popupHolder = document.getElementById('popupholder');
    const bound = name.getBoundingClientRect();
    const bound2 = last.getBoundingClientRect();
    const bound3 = decorativeBlock.getBoundingClientRect();
    const panelSizes = [32, 15, 25, 6, 20, 4, 16, 2.3];
    const background = document.getElementById('background');
    const buttons = document.getElementsByClassName('menubutton');
    const panels = document.getElementsByClassName('popupdisplay');
    const projects = document.getElementsByClassName('project');
    var carouselSlides = 0;

    function updateCarousel(change) {
      carouselSlides += change;
      if (carouselSlides >= projects.length) carouselSlides -= projects.length;
      if (carouselSlides <= -projects.length) carouselSlides += projects.length;
      for (var i = 0; i < projects.length; i++) {
        projects[i].style.setProperty("display", "none");
      }
      if (change == 1) {
        var remove = carouselSlides - 1;
        if (remove < 0) remove += projects.length;
        if (remove >= projects.length) remove -= projects.length;
        projects[remove].style.setProperty("display", "block");
        projects[remove].style.setProperty("opacity", "0");
        projects[remove].style.setProperty("left", "-7em");
        for (var i = 0; i < 4; i++) {
          var j = i + carouselSlides;
          if (j < 0) j += projects.length;
          if (j >= projects.length) j -= projects.length;
          projects[j].style.setProperty("display", "block");
          if (i == 3) {
            projects[j].style.setProperty("left", `${7*(i+1)}em`);
            projects[j].style.setProperty("opacity", "0");
            projects[j].offsetHeight;
          }
          projects[j].style.setProperty("opacity", "1");
          projects[j].style.setProperty("left", `${7*(i)}em`);
        }
      }
      else {
        var remove = carouselSlides + 4;
        if (remove < 0) remove += projects.length;
        if (remove >= projects.length) remove -= projects.length;
        projects[remove].style.setProperty("display", "block");
        projects[remove].style.setProperty("opacity", "0");
        projects[remove].style.setProperty("left", "28em");
        for (var i = 3; i >= 0; i--) {
          var j = i + carouselSlides;
          if (j < 0) j += projects.length;
          if (j >= projects.length) j -= projects.length;
          projects[j].style.setProperty("display", "block");
          if (i == 0) {
            projects[j].style.setProperty("left", `${7*(i-1)}em`);
            projects[j].style.setProperty("opacity", "0");
            projects[j].offsetHeight;
          }
          projects[j].style.setProperty("opacity", "1");
          projects[j].style.setProperty("left", `${7*(i)}em`);
        }
      }
    }
    updateCarousel(0);
    async function openPanel(panel) {
      var foundActive = 0;
      var waitingForTransition = false;
      for (var i = 0; i < buttons.length; i++) {
        if (buttons[i].dataset.active == 'true') foundActive++;
      }
      if (!foundActive) {
        popupHolder.style.transition = "none";
        popupHolder.style.setProperty("left", -panelSizes[panel * 2].toString() + "em");
        popupHolder.offsetHeight;
        popupHolder.style.transition = "";
      }
      if (foundActive == 1 && buttons[panel].dataset.active == 'true') {
        popupHolder.style.setProperty("left", -panelSizes[panel * 2].toString() + "em");
        waitingForTransition = true;
      }
      else {
        for (var i = 0; i < panels.length; i++) {
          panels[i].style.display = 'none'
        }
      }

      if (buttons[panel].dataset.active == 'false') buttons[panel].dataset.active = 'true';
      else buttons[panel].dataset.active = 'false';
      for (var i = 0; i < buttons.length; i++) {
        if (i == panel) continue;
        buttons[i].dataset.active = 'false';
      }
      nameContainer.style.setProperty("bottom", 0);
      decorativeBlock.style.setProperty("right", 0);
      if (waitingForTransition) {
        await new Promise(r => setTimeout(r, 500));
        panels[panel].style.display = 'none';
      }
      if (buttons[panel].dataset.active == 'false') return;
      nameContainer.style.setProperty("bottom", (bound.top - bound.bottom).toString() + "px");
      decorativeBlock.style.setProperty("right", (bound3.left - bound3.right).toString() + "px");
      popupHolder.style.setProperty("width", panelSizes[panel * 2].toString() + "em");
      popupHolder.style.setProperty("height", panelSizes[panel * 2 + 1].toString() + "em");
      popupHolder.style.setProperty("left", 0);
      panels[panel].style.display = 'block';
    }
    document.addEventListener("mousemove", event => {
      name.style.setProperty("background-position-x", (event.clientX - bound.left - (bound.right - bound.left) * 5).toString() + "px");
      name.style.setProperty("background-position-y", (event.clientY - bound.top - (bound.bottom - bound.top) * 5).toString() + "px");
      last.style.setProperty("background-position-x", (event.clientX - bound2.left - (bound2.right - bound2.left) * 10).toString() + "px");
      last.style.setProperty("background-position-y", (event.clientY - bound2.top - (bound2.bottom - bound2.top) * 10).toString() + "px");
    });
    var lastTime = Date.now();
    document.getElementById("portfolio").addEventListener("wheel", event => {
      if (Date.now() - lastTime < 100) return;
      console.log(Date.now() - lastTime);
      updateCarousel(-Math.sign(event.deltaY));
      lastTime = Date.now();
    });
  </script>
</body>
</html>