<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ansel Stanik</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="content">
        <p class="terminal-text" id="main-terminal">[ansel@astanik.dev ~]$ <span id="caret">█</span></p>
        <div id="extra-main-terminal">
        </div>
    </div>
    <div id="sub-content">
        <p class="terminal-text" id="sub-content-text"></p>
    </div>
    <div id="images-content">
    </div>
    <div id="navigation">
        <button class="nav-button" onclick="openCategory('about me')">about me</button>
        <button class="nav-button" onclick="openCategory('games')">games</button>
        <button class="nav-button" onclick="openCategory('research')">research</button>
        <button class="nav-button" onclick="openCategory('web')">web</button>
    </div>

    <script>
        var caret = document.getElementById('caret');

        function blinkCaret() {
            if (caret.style.visibility === 'visible') {
                caret.style.visibility = 'hidden';
            } else {
                caret.style.visibility = 'visible';
            }
        }

        setInterval(blinkCaret, 500);

        const data = {
            'about me': {
                'top-command': 'whoami',
                'command': 'aboutme.sh',
                'content': `<h1 class="fancy-name">&nbsp;█████╗&nbsp;███╗&nbsp;&nbsp;&nbsp;██╗███████╗███████╗██╗&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;███████╗████████╗&nbsp;█████╗&nbsp;███╗&nbsp;&nbsp;&nbsp;██╗██╗██╗&nbsp;&nbsp;██╗</h1>
<h1 class="fancy-name">██╔══██╗████╗&nbsp;&nbsp;██║██╔════╝██╔════╝██║&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;██╔════╝╚══██╔══╝██╔══██╗████╗&nbsp;&nbsp;██║██║██║&nbsp;██╔╝</h1>
<h1 class="fancy-name">███████║██╔██╗&nbsp;██║███████╗█████╗&nbsp;&nbsp;██║&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;███████╗&nbsp;&nbsp;&nbsp;██║&nbsp;&nbsp;&nbsp;███████║██╔██╗&nbsp;██║██║█████╔╝</h1>
<h1 class="fancy-name">██╔══██║██║╚██╗██║╚════██║██╔══╝&nbsp;&nbsp;██║&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;╚════██║&nbsp;&nbsp;&nbsp;██║&nbsp;&nbsp;&nbsp;██╔══██║██║╚██╗██║██║██╔═██╗</h1>
<h1 class="fancy-name">██║&nbsp;&nbsp;██║██║&nbsp;╚████║███████║███████╗███████╗&nbsp;&nbsp;&nbsp;&nbsp;███████║&nbsp;&nbsp;&nbsp;██║&nbsp;&nbsp;&nbsp;██║&nbsp;&nbsp;██║██║&nbsp;╚████║██║██║&nbsp;&nbsp;██╗</h1>
<h1 class="fancy-name">╚═╝&nbsp;&nbsp;╚═╝╚═╝&nbsp;&nbsp;╚═══╝╚══════╝╚══════╝╚══════╝&nbsp;&nbsp;&nbsp;&nbsp;╚══════╝&nbsp;&nbsp;&nbsp;╚═╝&nbsp;&nbsp;&nbsp;╚═╝&nbsp;&nbsp;╚═╝╚═╝&nbsp;&nbsp;╚═══╝╚═╝╚═╝&nbsp;&nbsp;╚═╝</h1>
        <p class="terminal-text">computer science student at oregon state university<br><br>[ansel@astanik.dev ~]$ <span id="caret">█</span></p>`,
                'subcontent': `i'm a first-year student at oregon state.<br>
                <a class="link" href="files/ansel_stanik_resume.pdf" target="_blank" rel="noopener">my resume</a><br>
                <a class="link" href="https://github.com/doomkitty87" target="_blank" rel="noopener">my github</a><br>
                <a class="link" href="https://linkedin.com/in/anselstanik" target="_blank" rel="noopener">my linkedin</a><br>`,
            },
            'games': {
                'top-command': 'ls games',
                'command': 'get_info.sh games/',
                'options': [
                    {
                        'name': 'northwoods',
                        'description': 'a survival game set in the pacific northwest',
                        'images': ['northwoodspostcard.png', 'northwoodscliffs.png', 'northwoodsforest.png']
                    },
                    {
                        'name': 'on the lamb!',
                        'description': 'eccentric sheep herding game made for GMTK 2025',
                        'images': ['onthelamblasso.png', 'onthelambmap.png', 'onthelambmonster.png', 'onthelambcloning.png', 'onthelambrocket.png']
                    },
                    {
                        'name': 'nocte',
                        'description': 'an exploration game set on a procedurally generated planet',
                        'images': ['nocteposteralt.png', 'noctemountains.png']
                    },
                    {
                        'name': 'symbiont',
                        'description': 'a first-person shooter where you swap consciousness with your enemies',
                        'images': ['symbiontposter.png']
                    }
                ]
            },
            'research': {
                'top-command': 'ls research',
                'command': 'get_info.sh research/',
                'options': [
                    {

                    },
                ]
            },
            'web': {
                'top-command': 'ls web',
                'command': 'get_info.sh web/',
                'options': [
                    {
                        'name': 'seafoam',
                        'description': 'a route finding tool for Minecraft mining that minimizes travel time and angular movement while maximizing output',
                        'images': ['seafoam1.png', 'seafoam2.png', 'seafoam3.png']
                    },
                ]
            }
        }

        const contentPane = document.getElementById('sub-content');
        const imagePane = document.getElementById('images-content');

        const content = document.getElementById('content');
        const terminalText = document.getElementById('main-terminal');
        const subContentText = document.getElementById('sub-content-text');
        const extraMainTerminal = document.getElementById('extra-main-terminal');

        const mainTermPrompt = '[ansel@astanik.dev ~]$ ';
        const panelTermPrompt = '[you@astanik.dev ~]$ ';
        const imagePath = 'images/';

        var cancelAnimation = false;
        var animatingSubContent = false;

        async function animateSubContent(command, content, images=[]) {
            while (animatingSubContent) {
                cancelAnimation = true;
                await new Promise(resolve => setTimeout(resolve, 25));
            }

            animatingSubContent = true;
            cancelAnimation = false;
            contentPane.style.transform = 'translateX(0)';
            imagePane.style.transform = images.length > 0 ? 'translateY(0)' : 'translateY(150%)';
            subContentText.innerHTML = panelTermPrompt;
            imagePane.innerHTML = '';

            for (let i = 0; i < command.length; i++) {
                if (cancelAnimation) {
                    cancelAnimation = false;
                    animatingSubContent = false;
                    return;
                }
                await new Promise(resolve => setTimeout(resolve, 25));
                subContentText.innerHTML += command.charAt(i);
            }

            subContentText.innerHTML += '<br><br>';

            for (let i = 0; i < content.split('\n').length; i++) {
                if (cancelAnimation) {
                    cancelAnimation = false;
                    animatingSubContent = false;
                    return;
                }
                await new Promise(resolve => setTimeout(resolve, 100));
                const nextLine = content.split('\n')[i];
                subContentText.innerHTML += nextLine + '<br>';
            }

            for (let j = 0; j < images.length; j++) {
                const image = images[j];
                if (cancelAnimation) {
                    cancelAnimation = false;
                    animatingSubContent = false;
                    return;
                }
                await new Promise(resolve => setTimeout(resolve, 100));
                const img = document.createElement('img');
                img.src = 'images/' + image;
                img.className = 'content-image';
                imagePane.appendChild(img);
            }

            animatingSubContent = false;
        }

        var currentPage = '';
        const currentOptionButtons = [];
        openCategory('about me');

        var animating = false;

        async function openCategory(name) {
            if (animating) return;
            if (name == currentPage) return;
            currentPage = name;

            // Close pane
            contentPane.style.transform = 'translateX(115%)';
            imagePane.style.transform = 'translateY(150%)';

            // Clear terminal
            terminalText.innerHTML = '';
            extraMainTerminal.innerHTML = '';

            // Animate text change on main terminal
            terminalText.innerHTML = mainTermPrompt;

            const targetText = data[name]['top-command'];
            for (let i = 0; i < targetText.length; i++) {
                await new Promise(resolve => setTimeout(resolve, 50));
                terminalText.innerHTML += targetText.charAt(i);
            }

            let toFill = data[name]['content'];
            if (!toFill) {
                toFill = '';
                data[name]['options'].forEach(element => {
                    toFill += '<button class="option-button" onclick="selectOption(\'' + element['name'] + '\')">' + element['name'] + '</button><br>\n';
                });
            }

            for (let i = 0; i < toFill.split('\n').length; i++) {
                await new Promise(resolve => setTimeout(resolve, 100));
                // Animate line by line instead of character by character
                const nextLine = toFill.split('\n')[i];
                extraMainTerminal.innerHTML += nextLine;
            }

            caret = document.getElementById('caret');

            // Add buttons
            const optionButtons = document.querySelectorAll('.option-button');
            optionButtons.forEach(button => {
                currentOptionButtons.push(button);
            });

            if (name == 'about me') {
                const newSubContentCommand = '/bin/bash ' + data[name]['command']
                const newSubContent = data[name]['subcontent']
                // Command gets printed character by character, content gets printed line by line
                animateSubContent(newSubContentCommand, newSubContent);
            } else {
                selectOption(data[name]['options'][0]['name']);
            }
        }

        function selectOption(name) {
            // Set active class on current button and remove it from others
            currentOptionButtons.forEach(button => {
                button.classList.remove('active');
                if (button.textContent === name) {
                    button.classList.add('active');
                }
            });

            const command = '/bin/bash ' + data[currentPage]['command'] + name;
            const description = data[currentPage]['options'].find(option => option.name === name).description;
            const images = data[currentPage]['options'].find(option => option.name === name).images;

            animateSubContent(command, description, images);
        }
    </script>
</body>
</html>